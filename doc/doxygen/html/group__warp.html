<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9"/>
<title>GraphLab: Distributed Graph-Parallel API: Warp System</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">GraphLab: Distributed Graph-Parallel API
   &#160;<span id="projectnumber">2.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__warp.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Warp System</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgraphlab_1_1warp_1_1warp__engine.html">graphlab::warp::warp_engine&lt; GraphType, MessageType &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The warp engine executed update functions asynchronously and can ensure mutual exclusion such that adjacent vertices are never executed simultaneously. The default mode is "factorized" consistency in which only individual gathers/applys/ scatters are guaranteed to be consistent, but this can be strengthened to provide full mutual exclusion.  <a href="classgraphlab_1_1warp_1_1warp__engine.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaee15548ed56f9ad746bcf1388b552c95"><td class="memTemplParams" colspan="2">template&lt;typename ContextType , typename VertexType &gt; </td></tr>
<tr class="memitem:gaee15548ed56f9ad746bcf1388b552c95"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__warp.html#gaee15548ed56f9ad746bcf1388b552c95">graphlab::warp::broadcast_neighborhood</a> (ContextType &amp;context, VertexType current, edge_dir_type edge_direction, void(*broadcast_fn)(ContextType &amp;context, typename VertexType::graph_type::edge_type edge, VertexType other))</td></tr>
<tr class="separator:gaee15548ed56f9ad746bcf1388b552c95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac57732b73043f0dd697ecf2df43770c0"><td class="memTemplParams" colspan="2">template&lt;typename ContextType , typename ExtraArg , typename VertexType &gt; </td></tr>
<tr class="memitem:gac57732b73043f0dd697ecf2df43770c0"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__warp.html#gac57732b73043f0dd697ecf2df43770c0">graphlab::warp::broadcast_neighborhood</a> (ContextType &amp;context, VertexType current, edge_dir_type edge_direction, void(*broadcast_fn)(ContextType &amp;context, typename VertexType::graph_type::edge_type edge, VertexType other, const ExtraArg extra), const ExtraArg extra)</td></tr>
<tr class="separator:gac57732b73043f0dd697ecf2df43770c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga642f56ae436a5825835ed2c0921732bb"><td class="memTemplParams" colspan="2">template&lt;typename RetType , typename VertexType &gt; </td></tr>
<tr class="memitem:ga642f56ae436a5825835ed2c0921732bb"><td class="memTemplItemLeft" align="right" valign="top">RetType&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__warp.html#ga642f56ae436a5825835ed2c0921732bb">graphlab::warp::map_reduce_neighborhood</a> (VertexType current, edge_dir_type edge_direction, RetType(*mapper)(typename VertexType::graph_type::edge_type edge, VertexType other), void(*combiner)(RetType &amp;self, const RetType &amp;other)=warp_impl::default_combiner&lt; RetType &gt;)</td></tr>
<tr class="separator:ga642f56ae436a5825835ed2c0921732bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga34001de6d3215caa92f92db54a394a20"><td class="memTemplParams" colspan="2">template&lt;typename RetType , typename ExtraArg , typename VertexType &gt; </td></tr>
<tr class="memitem:ga34001de6d3215caa92f92db54a394a20"><td class="memTemplItemLeft" align="right" valign="top">RetType&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__warp.html#ga34001de6d3215caa92f92db54a394a20">graphlab::warp::map_reduce_neighborhood</a> (VertexType current, edge_dir_type edge_direction, const ExtraArg extra, RetType(*mapper)(typename VertexType::graph_type::edge_type edge, VertexType other, const ExtraArg extra), void(*combiner)(RetType &amp;self, const RetType &amp;other, const ExtraArg extra)=warp_impl::extended_default_combiner&lt; RetType, ExtraArg &gt;)</td></tr>
<tr class="separator:ga34001de6d3215caa92f92db54a394a20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4d8e212ebc1f351fdcaaf5db2bb85b1c"><td class="memTemplParams" colspan="2">template&lt;typename VertexType &gt; </td></tr>
<tr class="memitem:ga4d8e212ebc1f351fdcaaf5db2bb85b1c"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__warp.html#ga4d8e212ebc1f351fdcaaf5db2bb85b1c">graphlab::warp::transform_neighborhood</a> (VertexType current, edge_dir_type edge_direction, void(*transform_fn)(typename VertexType::graph_type::edge_type edge, VertexType other))</td></tr>
<tr class="separator:ga4d8e212ebc1f351fdcaaf5db2bb85b1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac9495a4c3af1033360684c67b9214423"><td class="memTemplParams" colspan="2">template&lt;typename ExtraArg , typename VertexType &gt; </td></tr>
<tr class="memitem:gac9495a4c3af1033360684c67b9214423"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__warp.html#gac9495a4c3af1033360684c67b9214423">graphlab::warp::transform_neighborhood</a> (VertexType current, edge_dir_type edge_direction, void(*transform_fn)(typename VertexType::graph_type::edge_type edge, VertexType other, const ExtraArg extra), const ExtraArg extra)</td></tr>
<tr class="separator:gac9495a4c3af1033360684c67b9214423"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1b9dc57a80c5015e2101bd12f95e40a8"><td class="memTemplParams" colspan="2">template&lt;typename GraphType , typename FunctionType &gt; </td></tr>
<tr class="memitem:ga1b9dc57a80c5015e2101bd12f95e40a8"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__warp.html#ga1b9dc57a80c5015e2101bd12f95e40a8">graphlab::warp::parfor_all_vertices</a> (GraphType &amp;graph, FunctionType fn, vertex_set vset=GraphType::complete_set(), size_t nfibers=10000, size_t stacksize=16384)</td></tr>
<tr class="separator:ga1b9dc57a80c5015e2101bd12f95e40a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gaee15548ed56f9ad746bcf1388b552c95"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ContextType , typename VertexType &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void graphlab::warp::broadcast_neighborhood </td>
          <td>(</td>
          <td class="paramtype">ContextType &amp;&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VertexType&#160;</td>
          <td class="paramname"><em>current</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacegraphlab.html#a7a1c434a751d2eee47f43906ee43fc89">edge_dir_type</a>&#160;</td>
          <td class="paramname"><em>edge_direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(ContextType &amp;<a class="el" href="classgraphlab_1_1context.html">context</a>, typename VertexType::graph_type::edge_type edge, VertexType other)&#160;</td>
          <td class="paramname"><em>broadcast_fn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>the broadcast_neighborhood function allows a parallel transformation of the neighborhood of a vertex to be performed and also provides a <a class="el" href="classgraphlab_1_1warp_1_1warp__engine.html" title="The warp engine executed update functions asynchronously and can ensure mutual exclusion such that ad...">warp_engine</a> context. . This is a blocking operation, and will not return until the distributed computation is complete. When run inside a fiber, to hide latency, the system will automatically context switch to evaluate some other fiber which is ready to run. This function is functionally similar to the transform_neighborhood function, but requires a warp_engine context to be provided. The <a class="el" href="classgraphlab_1_1warp_1_1warp__engine.html" title="The warp engine executed update functions asynchronously and can ensure mutual exclusion such that ad...">warp_engine</a> context will also be passed on to the transform function.</p>
<p>Abstractly, the computation accomplishes the following:</p>
<div class="fragment"><div class="line"><span class="keywordflow">foreach</span>(edge <span class="keywordflow">in</span> neighborhood of current vertex) {</div>
<div class="line">  transform_fn(context, edge, opposite vertex)</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section attention"><dt>Attention</dt><dd>It is important that the transform_fn should only make modifications to the edge data, and not the data on either of the vertices.</dd>
<dd>
Unlike the transform_neighborhood function, this call actually performs synchronization, so the value of both vertex endpoints are correct.</dd></dl>
<p>Here is an example which schedules all vertices on out edges.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> schedule(engine_type::context&amp; context,</div>
<div class="line">              <a class="code" href="classgraphlab_1_1distributed__graph_1_1edge__type.html">graph_type::edge_type</a> edge, </div>
<div class="line">              <a class="code" href="structgraphlab_1_1distributed__graph_1_1vertex__type.html">graph_type::vertex_type</a> other) {</div>
<div class="line">  context.signal(other);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> update_function(engine_type::context&amp; context,</div>
<div class="line">                     <a class="code" href="structgraphlab_1_1distributed__graph_1_1vertex__type.html">graph_type::vertex_type</a> vertex) {</div>
<div class="line">   <a class="code" href="group__warp.html#gaee15548ed56f9ad746bcf1388b552c95">warp::broadcast_neighborhood</a>(context,</div>
<div class="line">                                vertex,</div>
<div class="line">                                <a class="code" href="namespacegraphlab.html#a7a1c434a751d2eee47f43906ee43fc89ad00c78683bc4a0495b12a3b1ba99dd00">OUT_EDGES</a>,</div>
<div class="line">                                schedule);</div>
<div class="line">}</div>
</div><!-- fragment --><p>An overload is provided which allows you to pass an additional arbitrary argument to the broadcast.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current</td><td>The vertex to map reduce the neighborhood over </td></tr>
    <tr><td class="paramname">edge_direction</td><td>To run over all IN_EDGES, OUT_EDGES or ALL_EDGES </td></tr>
    <tr><td class="paramname">transform_fn</td><td>The transform function to run on all the selected edges.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classgraphlab_1_1warp_1_1warp__engine.html" title="The warp engine executed update functions asynchronously and can ensure mutual exclusion such that ad...">warp_engine</a> </dd>
<dd>
warp::parfor_all_vertices </dd>
<dd>
warp::map_reduce_neighborhood </dd>
<dd>
warp::transform_neighborhood </dd></dl>

<p>Definition at line <a class="el" href="warp__graph__broadcast_8hpp_source.html#l00360">360</a> of file <a class="el" href="warp__graph__broadcast_8hpp_source.html">warp_graph_broadcast.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="gac57732b73043f0dd697ecf2df43770c0"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ContextType , typename ExtraArg , typename VertexType &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void graphlab::warp::broadcast_neighborhood </td>
          <td>(</td>
          <td class="paramtype">ContextType &amp;&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VertexType&#160;</td>
          <td class="paramname"><em>current</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacegraphlab.html#a7a1c434a751d2eee47f43906ee43fc89">edge_dir_type</a>&#160;</td>
          <td class="paramname"><em>edge_direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(ContextType &amp;<a class="el" href="classgraphlab_1_1context.html">context</a>, typename VertexType::graph_type::edge_type edge, VertexType other, const ExtraArg extra)&#160;</td>
          <td class="paramname"><em>broadcast_fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ExtraArg&#160;</td>
          <td class="paramname"><em>extra</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>the broadcast_neighborhood function allows a parallel transformation of the neighborhood of a vertex to be performed and also provides a <a class="el" href="classgraphlab_1_1warp_1_1warp__engine.html" title="The warp engine executed update functions asynchronously and can ensure mutual exclusion such that ad...">warp_engine</a> context. . This is a blocking operation, and will not return until the distributed computation is complete. When run inside a fiber, to hide latency, the system will automatically context switch to evaluate some other fiber which is ready to run. This function is functionally similar to the transform_neighborhood function, but requires a warp_engine context to be provided. The warp_engine context will also be passed on to the transform function.</p>
<p>This is the more general overload of the broadcast_neighborhood function which allows an additional arbitrary extra argument to be passed along to the transform function</p>
<p>Abstractly, the computation accomplishes the following:</p>
<div class="fragment"><div class="line"><span class="keywordflow">foreach</span>(edge <span class="keywordflow">in</span> neighborhood of current vertex) {</div>
<div class="line">  transform_fn(context, edge, opposite vertex, extraarg)</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section attention"><dt>Attention</dt><dd>It is important that the transform_fn should only make modifications to the edge data, and not the data on either of the vertices.</dd>
<dd>
Unlike the transform_neighborhood function, this call actually performs synchronization, so the value of both vertex endpoints are correct.</dd></dl>
<p>Here is an example which schedules all vertices on out edges with a particular value </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> schedule(engine_type::context&amp; context,</div>
<div class="line">              <a class="code" href="classgraphlab_1_1distributed__graph_1_1edge__type.html">graph_type::edge_type</a> edge, </div>
<div class="line">              <a class="code" href="structgraphlab_1_1distributed__graph_1_1vertex__type.html">graph_type::vertex_type</a> other,</div>
<div class="line">              <span class="keywordtype">int</span> value) {</div>
<div class="line">  <span class="keywordflow">if</span> (edge.<a class="code" href="classgraphlab_1_1distributed__graph_1_1edge__type.html#a4eac8fe3111597c06f5732a63948ec31">data</a>() == value)  context.signal(other);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> update_function(engine_type::context&amp; context,</div>
<div class="line">                     <a class="code" href="structgraphlab_1_1distributed__graph_1_1vertex__type.html">graph_type::vertex_type</a> vertex) {</div>
<div class="line">   <span class="comment">// schedule all neighbors connected to an out edge </span></div>
<div class="line">   <span class="comment">// with value 10</span></div>
<div class="line">   <a class="code" href="group__warp.html#gaee15548ed56f9ad746bcf1388b552c95">warp::broadcast_neighborhood</a>(context,</div>
<div class="line">                                vertex,</div>
<div class="line">                                <a class="code" href="namespacegraphlab.html#a7a1c434a751d2eee47f43906ee43fc89ad00c78683bc4a0495b12a3b1ba99dd00">OUT_EDGES</a>,</div>
<div class="line">                                <span class="keywordtype">int</span>(10),</div>
<div class="line">                                schedule));</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current</td><td>The vertex to map reduce the neighborhood over </td></tr>
    <tr><td class="paramname">edge_direction</td><td>To run over all IN_EDGES, OUT_EDGES or ALL_EDGES </td></tr>
    <tr><td class="paramname">extra</td><td>An additional argument to be passed to the broadcast </td></tr>
    <tr><td class="paramname">transform_fn</td><td>The transform function to run on all the selected edges.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classgraphlab_1_1warp_1_1warp__engine.html" title="The warp engine executed update functions asynchronously and can ensure mutual exclusion such that ad...">warp_engine</a> </dd>
<dd>
<a class="el" href="group__warp.html#ga1b9dc57a80c5015e2101bd12f95e40a8">warp::parfor_all_vertices()</a> </dd>
<dd>
<a class="el" href="group__warp.html#ga642f56ae436a5825835ed2c0921732bb">warp::map_reduce_neighborhood()</a> </dd>
<dd>
<a class="el" href="group__warp.html#ga4d8e212ebc1f351fdcaaf5db2bb85b1c">warp::transform_neighborhood()</a> </dd></dl>

<p>Definition at line <a class="el" href="warp__graph__broadcast_8hpp_source.html#l00444">444</a> of file <a class="el" href="warp__graph__broadcast_8hpp_source.html">warp_graph_broadcast.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ga642f56ae436a5825835ed2c0921732bb"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RetType , typename VertexType &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">RetType graphlab::warp::map_reduce_neighborhood </td>
          <td>(</td>
          <td class="paramtype">VertexType&#160;</td>
          <td class="paramname"><em>current</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacegraphlab.html#a7a1c434a751d2eee47f43906ee43fc89">edge_dir_type</a>&#160;</td>
          <td class="paramname"><em>edge_direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RetType(*)(typename VertexType::graph_type::edge_type edge, VertexType other)&#160;</td>
          <td class="paramname"><em>mapper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(RetType &amp;self, const RetType &amp;other)&#160;</td>
          <td class="paramname"><em>combiner</em> = <code>warp_impl::default_combiner&lt;RetType&gt;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This Warp function allows a map-reduce aggregation of the neighborhood of a vertex to be performed. This is a blocking operation, and will not return until the distributed computation is complete. When run inside a fiber, to hide latency, the system will automatically context switch to evaluate some other fiber which is ready to run.</p>
<p>Abstractly, the computation accomplishes the following:</p>
<div class="fragment"><div class="line">ResultType result()</div>
<div class="line">foreach(edge in neighborhood of current vertex) {</div>
<div class="line">  combiner(result, mapper(edge, opposite vertex))</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">return</span> result</div>
</div><!-- fragment --><dl class="section attention"><dt>Attention</dt><dd>This call does not accomplish synchronization, thus modifications to the current vertex will not be reflected during the call. In other words, inside the mapper function, only the values on edge.data() and other.data() will be valid. The value of the vertex on the "self" end of the edge will not reflect changes you made to the vertex immediately before calling <a class="el" href="group__warp.html#ga34001de6d3215caa92f92db54a394a20">warp::map_reduce_neighborhood()</a>. Use the overload of map_reduce_neighborhood (below) if you want to pass on additional information to the mapper.</dd></dl>
<p>Here is an example which implements the PageRank computation, using the parfor_all_vertices function to create a parallel for loop using fibers. </p><div class="fragment"><div class="line"><span class="keywordtype">float</span> pagerank_map(<a class="code" href="classgraphlab_1_1distributed__graph_1_1edge__type.html">graph_type::edge_type</a> edge, <a class="code" href="structgraphlab_1_1distributed__graph_1_1vertex__type.html">graph_type::vertex_type</a> other) {</div>
<div class="line"> <span class="keywordflow">return</span> other.<a class="code" href="structgraphlab_1_1distributed__graph_1_1vertex__type.html#a1f80515cf596c6a9ec1e47c2fc5698f0">data</a>() / other.<a class="code" href="structgraphlab_1_1distributed__graph_1_1vertex__type.html#a82ad0c51437cf822c92a8c4a904b74d1">num_out_edges</a>();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// the function arguments of the combiner must match the return type of the</span></div>
<div class="line"><span class="comment">// map function.</span></div>
<div class="line"><span class="keywordtype">void</span> pagerank_combine(<span class="keywordtype">float</span>&amp; a, <span class="keyword">const</span> <span class="keywordtype">float</span>&amp; b) {</div>
<div class="line">  a += b;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> pagerank(<a class="code" href="structgraphlab_1_1distributed__graph_1_1vertex__type.html">graph_type::vertex_type</a> vertex) {</div>
<div class="line">   <span class="comment">// computes an aggregate over the neighborhood using map_reduce_neighborhood</span></div>
<div class="line">   <span class="comment">// The pagerank_map function will be executed over every in-edge of the graph,</span></div>
<div class="line">   <span class="comment">// and the result  of each map is combined using the pagerank_combine </span></div>
<div class="line">   <span class="comment">// function. The pagerank_combine is not strictly necessary here since the</span></div>
<div class="line">   <span class="comment">// default combine behavior is to use += anyway.</span></div>
<div class="line">   vertex.<a class="code" href="structgraphlab_1_1distributed__graph_1_1vertex__type.html#a1f80515cf596c6a9ec1e47c2fc5698f0">data</a>() = 0.15 + 0.85 * <a class="code" href="group__warp.html#ga642f56ae436a5825835ed2c0921732bb">warp::map_reduce_neighborhood</a>(vertex,</div>
<div class="line">                                                               <a class="code" href="namespacegraphlab.html#a7a1c434a751d2eee47f43906ee43fc89a3f916362fe7def918c229e6b430e61d6">IN_EDGES</a>,</div>
<div class="line">                                                               pagerank_map,</div>
<div class="line">                                                               pagerank_combine);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">...</div>
<div class="line"><span class="comment">// runs the pagerank function on all the vertices in the graph.</span></div>
<div class="line">parfor_all_vertices(graph, pagerank); </div>
</div><!-- fragment --><p>An overload is provided which allows you to pass an additional arbitrary argument to the mappers and combiners.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current</td><td>The vertex to map reduce the neighborhood over </td></tr>
    <tr><td class="paramname">edge_direction</td><td>To run over all IN_EDGES, OUT_EDGES or ALL_EDGES </td></tr>
    <tr><td class="paramname">mapper</td><td>The map function that will be executed. Must be a function pointer. </td></tr>
    <tr><td class="paramname">combiner</td><td>The combine function that will be executed. Must be a function pointer. Optional. Defaults to using "+=" on the output of the mapper</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The result of the neighborhood map reduce operation. The return type matches the return type of the mapper.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classgraphlab_1_1warp_1_1warp__engine.html" title="The warp engine executed update functions asynchronously and can ensure mutual exclusion such that ad...">warp_engine</a> </dd>
<dd>
<a class="el" href="group__warp.html#ga1b9dc57a80c5015e2101bd12f95e40a8">warp::parfor_all_vertices()</a> </dd>
<dd>
<a class="el" href="group__warp.html#ga4d8e212ebc1f351fdcaaf5db2bb85b1c">warp::transform_neighborhood()</a> </dd>
<dd>
<a class="el" href="group__warp.html#gaee15548ed56f9ad746bcf1388b552c95">warp::broadcast_neighborhood()</a> </dd></dl>

<p>Definition at line <a class="el" href="warp__graph__mapreduce_8hpp_source.html#l00392">392</a> of file <a class="el" href="warp__graph__mapreduce_8hpp_source.html">warp_graph_mapreduce.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ga34001de6d3215caa92f92db54a394a20"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RetType , typename ExtraArg , typename VertexType &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">RetType graphlab::warp::map_reduce_neighborhood </td>
          <td>(</td>
          <td class="paramtype">VertexType&#160;</td>
          <td class="paramname"><em>current</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacegraphlab.html#a7a1c434a751d2eee47f43906ee43fc89">edge_dir_type</a>&#160;</td>
          <td class="paramname"><em>edge_direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ExtraArg&#160;</td>
          <td class="paramname"><em>extra</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RetType(*)(typename VertexType::graph_type::edge_type edge, VertexType other, const ExtraArg extra)&#160;</td>
          <td class="paramname"><em>mapper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(RetType &amp;self, const RetType &amp;other, const ExtraArg extra)&#160;</td>
          <td class="paramname"><em>combiner</em> = <code>warp_impl::extended_default_combiner&lt;RetType,&#160;ExtraArg&gt;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This Warp function allows a map-reduce aggregation of the neighborhood of a vertex to be performed. This is a blocking operation, and will not return until the distributed computation is complete. When run inside a fiber, to hide latency, the system will automatically context switch to evaluate some other fiber which is ready to run.</p>
<p>This is the more general overload of the map_reduce_neighborhood function which allows an additional arbitrary extra argument to be passed along to the mapper and combiner functions.</p>
<p>Abstractly, the computation accomplishes the following:</p>
<div class="fragment"><div class="line">ResultType result()</div>
<div class="line">foreach(edge in neighborhood of current vertex) {</div>
<div class="line">  combiner(result, mapper(edge, opposite vertex, extraarg), extraarg)</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">return</span> result</div>
</div><!-- fragment --><p>Here is an example which implements the PageRank computation, using the parfor_all_vertices function to create a parallel for loop using fibers. We demonstrate the additional argument by passing on the 0.85 scaling value to be computed in the map. </p><div class="fragment"><div class="line"><span class="keywordtype">float</span> pagerank_map(<a class="code" href="classgraphlab_1_1distributed__graph_1_1edge__type.html">graph_type::edge_type</a> edge, </div>
<div class="line">                   <a class="code" href="structgraphlab_1_1distributed__graph_1_1vertex__type.html">graph_type::vertex_type</a> other, <span class="keyword">const</span> <span class="keywordtype">float</span> scale) {</div>
<div class="line"> <span class="comment">// the scale value here will match the last argument passed into</span></div>
<div class="line"> <span class="comment">// the map_reduce_neighborhood call. In this case, it is fixed to</span></div>
<div class="line"> <span class="comment">// 0.85.</span></div>
<div class="line"> <span class="keywordflow">return</span> scale * other.<a class="code" href="structgraphlab_1_1distributed__graph_1_1vertex__type.html#a1f80515cf596c6a9ec1e47c2fc5698f0">data</a>() / other.<a class="code" href="structgraphlab_1_1distributed__graph_1_1vertex__type.html#a82ad0c51437cf822c92a8c4a904b74d1">num_out_edges</a>();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// the function arguments of the combiner must match the return type of the</span></div>
<div class="line"><span class="comment">// map function.</span></div>
<div class="line"><span class="keywordtype">void</span> pagerank_combine(<span class="keywordtype">float</span>&amp; a, <span class="keyword">const</span> <span class="keywordtype">float</span>&amp; b, <span class="keyword">const</span> <span class="keywordtype">float</span> _scale_unused) {</div>
<div class="line">  a += b;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> pagerank(<a class="code" href="structgraphlab_1_1distributed__graph_1_1vertex__type.html">graph_type::vertex_type</a> vertex) {</div>
<div class="line">   <span class="comment">// computes an aggregate over the neighborhood using map_reduce_neighborhood</span></div>
<div class="line">   <span class="comment">// The pagerank_map function will be executed over every in-edge of the graph,</span></div>
<div class="line">   <span class="comment">// and the result  of each map is combined using the pagerank_combine </span></div>
<div class="line">   <span class="comment">// function. The pagerank_combine is not strictly necessary here since the</span></div>
<div class="line">   <span class="comment">// default combine behavior is to use += anyway.</span></div>
<div class="line">   vertex.<a class="code" href="structgraphlab_1_1distributed__graph_1_1vertex__type.html#a1f80515cf596c6a9ec1e47c2fc5698f0">data</a>() = 0.15 + <a class="code" href="group__warp.html#ga642f56ae436a5825835ed2c0921732bb">warp::map_reduce_neighborhood</a>(vertex,</div>
<div class="line">                                                        <a class="code" href="namespacegraphlab.html#a7a1c434a751d2eee47f43906ee43fc89a3f916362fe7def918c229e6b430e61d6">IN_EDGES</a>,</div>
<div class="line">                                                        <span class="keywordtype">float</span>(0.85),</div>
<div class="line">                                                        pagerank_map,</div>
<div class="line">                                                        pagerank_combine);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">...</div>
<div class="line"><span class="comment">// runs the pagerank function on all the vertices in the graph.</span></div>
<div class="line">parfor_all_vertices(graph, pagerank); </div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current</td><td>The vertex to map reduce the neighborhood over </td></tr>
    <tr><td class="paramname">edge_direction</td><td>To run over all IN_EDGES, OUT_EDGES or ALL_EDGES </td></tr>
    <tr><td class="paramname">extra</td><td>An additional argument to be passed to the mapper and combiner functions. </td></tr>
    <tr><td class="paramname">mapper</td><td>The map function that will be executed. Must be a function pointer. </td></tr>
    <tr><td class="paramname">combiner</td><td>The combine function that will be executed. Must be a function pointer. Optional. Defaults to using "+=" on the output of the mapper </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The result of the neighborhood map reduce operation. The return type matches the return type of the mapper.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classgraphlab_1_1warp_1_1warp__engine.html" title="The warp engine executed update functions asynchronously and can ensure mutual exclusion such that ad...">warp_engine</a> </dd>
<dd>
<a class="el" href="group__warp.html#ga1b9dc57a80c5015e2101bd12f95e40a8">warp::parfor_all_vertices()</a> </dd>
<dd>
<a class="el" href="group__warp.html#ga4d8e212ebc1f351fdcaaf5db2bb85b1c">warp::transform_neighborhood()</a> </dd>
<dd>
<a class="el" href="group__warp.html#gaee15548ed56f9ad746bcf1388b552c95">warp::broadcast_neighborhood()</a> </dd></dl>

<p>Definition at line <a class="el" href="warp__graph__mapreduce_8hpp_source.html#l00485">485</a> of file <a class="el" href="warp__graph__mapreduce_8hpp_source.html">warp_graph_mapreduce.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ga1b9dc57a80c5015e2101bd12f95e40a8"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename GraphType , typename FunctionType &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void graphlab::warp::parfor_all_vertices </td>
          <td>(</td>
          <td class="paramtype">GraphType &amp;&#160;</td>
          <td class="paramname"><em>graph</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FunctionType&#160;</td>
          <td class="paramname"><em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classgraphlab_1_1vertex__set.html">vertex_set</a>&#160;</td>
          <td class="paramname"><em>vset</em> = <code>GraphType::complete_set()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nfibers</em> = <code>10000</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>stacksize</em> = <code>16384</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This Warp function provides a simple parallel for loop over all vertices in the graph, or in a given set of vertices. A large number of light-weight threads called fibers are used to run the user specified function, allowing the user to make what normally will be blocking calls, on the neighborhood of each vertex.</p>
<div class="fragment"><div class="line"><span class="keywordtype">float</span> pagerank_map(<a class="code" href="classgraphlab_1_1distributed__graph_1_1edge__type.html">graph_type::edge_type</a> edge, <a class="code" href="structgraphlab_1_1distributed__graph_1_1vertex__type.html">graph_type::vertex_type</a> other) {</div>
<div class="line"> <span class="keywordflow">return</span> other.<a class="code" href="structgraphlab_1_1distributed__graph_1_1vertex__type.html#a1f80515cf596c6a9ec1e47c2fc5698f0">data</a>() / other.<a class="code" href="structgraphlab_1_1distributed__graph_1_1vertex__type.html#a82ad0c51437cf822c92a8c4a904b74d1">num_out_edges</a>();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> pagerank(<a class="code" href="structgraphlab_1_1distributed__graph_1_1vertex__type.html">graph_type::vertex_type</a> vertex) {</div>
<div class="line">   <span class="comment">// computes an aggregate over the neighborhood using map_reduce_neighborhood</span></div>
<div class="line">   vertex.<a class="code" href="structgraphlab_1_1distributed__graph_1_1vertex__type.html#a1f80515cf596c6a9ec1e47c2fc5698f0">data</a>() = 0.15 + 0.85 * <a class="code" href="group__warp.html#ga642f56ae436a5825835ed2c0921732bb">warp::map_reduce_neighborhood</a>(vertex,</div>
<div class="line">                                                               <a class="code" href="namespacegraphlab.html#a7a1c434a751d2eee47f43906ee43fc89a3f916362fe7def918c229e6b430e61d6">IN_EDGES</a>,</div>
<div class="line">                                                               pagerank_map);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">...</div>
<div class="line"><span class="comment">// runs the pagerank function on all the vertices in the graph.</span></div>
<div class="line">parfor_all_vertices(graph, pagerank); </div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">graph</td><td>A reference to the graph object </td></tr>
    <tr><td class="paramname">fn</td><td>A function to run on each vertex. Has the prototype void(GraphType::vertex_type). Can be a boost::function </td></tr>
    <tr><td class="paramname">vset</td><td>A set of vertices to run on </td></tr>
    <tr><td class="paramname">nfibers</td><td>Number of fiber threads to use. Defaults to 10000 </td></tr>
    <tr><td class="paramname">stacksize</td><td>Size of each fiber stack in bytes. Defaults to 16384 bytes</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__warp.html#ga642f56ae436a5825835ed2c0921732bb">graphlab::warp::map_reduce_neighborhood()</a> </dd>
<dd>
graphlab::warp::warp_graph_transform() </dd></dl>

<p>Definition at line <a class="el" href="warp__parfor__all__vertices_8hpp_source.html#l00106">106</a> of file <a class="el" href="warp__parfor__all__vertices_8hpp_source.html">warp_parfor_all_vertices.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ga4d8e212ebc1f351fdcaaf5db2bb85b1c"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename VertexType &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void graphlab::warp::transform_neighborhood </td>
          <td>(</td>
          <td class="paramtype">VertexType&#160;</td>
          <td class="paramname"><em>current</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacegraphlab.html#a7a1c434a751d2eee47f43906ee43fc89">edge_dir_type</a>&#160;</td>
          <td class="paramname"><em>edge_direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(typename VertexType::graph_type::edge_type edge, VertexType other)&#160;</td>
          <td class="paramname"><em>transform_fn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The <a class="el" href="group__warp.html#gac9495a4c3af1033360684c67b9214423">transform_neighborhood()</a> function allows a parallel transformation of the neighborhood of a vertex to be performed. This is a blocking operation, and will not return until the distributed computation is complete. When run inside a fiber, to hide latency, the system will automatically context switch to evaluate some other fiber which is ready to run.</p>
<p>Abstractly, the computation accomplishes the following:</p>
<div class="fragment"><div class="line"><span class="keywordflow">foreach</span>(edge <span class="keywordflow">in</span> neighborhood of current vertex) {</div>
<div class="line">  transform_fn(edge, opposite vertex)</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section attention"><dt>Attention</dt><dd>It is important that the transform_fn should only make modifications to the edge data, and not the data on the other vertex.</dd>
<dd>
This call does not accomplish synchronization, thus modifications to the current vertex will not be reflected during the call. In other words, inside the mapper function, only the values on edge.data() and other.data() will be valid. The value of the vertex on the "self" end of the edge will not reflect changes you made to the vertex immediately before calling <a class="el" href="group__warp.html#gac9495a4c3af1033360684c67b9214423">transform_neighborhood()</a>. Use the overload of transform_neighborhood (below) if you want to pass on additional information to the mapper.</dd></dl>
<p>Here is an example which clears all the in edge values of some set of vertices. </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> clear_value(<a class="code" href="classgraphlab_1_1distributed__graph_1_1edge__type.html">graph_type::edge_type</a> edge, <a class="code" href="structgraphlab_1_1distributed__graph_1_1vertex__type.html">graph_type::vertex_type</a> other) {</div>
<div class="line"> edge.<a class="code" href="classgraphlab_1_1distributed__graph_1_1edge__type.html#a4eac8fe3111597c06f5732a63948ec31">data</a>() = 0;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> clear_in_edges(<a class="code" href="structgraphlab_1_1distributed__graph_1_1vertex__type.html">graph_type::vertex_type</a> vertex) {</div>
<div class="line">   <a class="code" href="group__warp.html#ga4d8e212ebc1f351fdcaaf5db2bb85b1c">warp::transform_neighborhood</a>(vertex,</div>
<div class="line">                                <a class="code" href="namespacegraphlab.html#a7a1c434a751d2eee47f43906ee43fc89a3f916362fe7def918c229e6b430e61d6">IN_EDGES</a>,</div>
<div class="line">                                clear_value);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">...</div>
<div class="line">warp::parfor_all_vertices(graph, clear_in_edges, some_vset); </div>
</div><!-- fragment --><p>An overload is provided which allows you to pass an additional arbitrary argument to the transform</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current</td><td>The vertex to map reduce the neighborhood over </td></tr>
    <tr><td class="paramname">edge_direction</td><td>To run over all IN_EDGES, OUT_EDGES or ALL_EDGES </td></tr>
    <tr><td class="paramname">transform_fn</td><td>The transform function to run on all the selected edges.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classgraphlab_1_1warp_1_1warp__engine.html" title="The warp engine executed update functions asynchronously and can ensure mutual exclusion such that ad...">warp_engine</a> </dd>
<dd>
<a class="el" href="group__warp.html#ga1b9dc57a80c5015e2101bd12f95e40a8">warp::parfor_all_vertices()</a> </dd>
<dd>
<a class="el" href="group__warp.html#ga642f56ae436a5825835ed2c0921732bb">warp::map_reduce_neighborhood()</a> </dd>
<dd>
<a class="el" href="group__warp.html#gaee15548ed56f9ad746bcf1388b552c95">warp::broadcast_neighborhood()</a> </dd></dl>

<p>Definition at line <a class="el" href="warp__graph__transform_8hpp_source.html#l00331">331</a> of file <a class="el" href="warp__graph__transform_8hpp_source.html">warp_graph_transform.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="gac9495a4c3af1033360684c67b9214423"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ExtraArg , typename VertexType &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void graphlab::warp::transform_neighborhood </td>
          <td>(</td>
          <td class="paramtype">VertexType&#160;</td>
          <td class="paramname"><em>current</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacegraphlab.html#a7a1c434a751d2eee47f43906ee43fc89">edge_dir_type</a>&#160;</td>
          <td class="paramname"><em>edge_direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(typename VertexType::graph_type::edge_type edge, VertexType other, const ExtraArg extra)&#160;</td>
          <td class="paramname"><em>transform_fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ExtraArg&#160;</td>
          <td class="paramname"><em>extra</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The transform_neighborhood function allows a parallel transformation of the neighborhood of a vertex to be performed. This is a blocking operation, and will not return until the distributed computation is complete. When run inside a fiber, to hide latency, the system will automatically context switch to evaluate some other fiber which is ready to run.</p>
<p>This is the more general overload of the <a class="el" href="group__warp.html#gac9495a4c3af1033360684c67b9214423">warp::transform_neighborhood()</a> function which allows an additional arbitrary extra argument to be passed along to the mapper and combiner functions.</p>
<p>Abstractly, the computation accomplishes the following:</p>
<div class="fragment"><div class="line"><span class="keywordflow">foreach</span>(edge <span class="keywordflow">in</span> neighborhood of current vertex) {</div>
<div class="line">  transform_fn(edge, extraarg, opposite vertex)</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section attention"><dt>Attention</dt><dd>It is important that the transform_fn should only make modifications to the edge data, and not the data on the other vertex.</dd>
<dd>
This call does not accomplish synchronization, thus modifications to the current vertex will not be reflected during the call. In other words, inside the mapper function, only the values on edge.data() and other.data() will be valid. The value of the vertex on the "self" end of the edge will not reflect changes you made to the vertex immediately before calling <a class="el" href="group__warp.html#gac9495a4c3af1033360684c67b9214423">warp::transform_neighborhood()</a> . Use the overload of <a class="el" href="group__warp.html#gac9495a4c3af1033360684c67b9214423">warp::transform_neighborhood()</a> if you want to pass on additional information to the mapper.</dd></dl>
<p>Here is an example which set all the in edge values of some set of vertices to the source vertex's value. </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> set_value(<a class="code" href="classgraphlab_1_1distributed__graph_1_1edge__type.html">graph_type::edge_type</a> edge, <a class="code" href="structgraphlab_1_1distributed__graph_1_1vertex__type.html">graph_type::vertex_type</a> other,</div>
<div class="line">                 <span class="keywordtype">int</span> value) {</div>
<div class="line"> edge.<a class="code" href="classgraphlab_1_1distributed__graph_1_1edge__type.html#a4eac8fe3111597c06f5732a63948ec31">data</a>() = value;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> set_in_edges(<a class="code" href="structgraphlab_1_1distributed__graph_1_1vertex__type.html">graph_type::vertex_type</a> vertex) {</div>
<div class="line">   <a class="code" href="group__warp.html#ga4d8e212ebc1f351fdcaaf5db2bb85b1c">warp::transform_neighborhood</a>(vertex,</div>
<div class="line">                                <a class="code" href="namespacegraphlab.html#a7a1c434a751d2eee47f43906ee43fc89a3f916362fe7def918c229e6b430e61d6">IN_EDGES</a>,</div>
<div class="line">                                clear_value,</div>
<div class="line">                                vertex.<a class="code" href="structgraphlab_1_1distributed__graph_1_1vertex__type.html#a1f80515cf596c6a9ec1e47c2fc5698f0">data</a>(), <span class="comment">// say this is an integer</span></div>
<div class="line">                                );</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">...</div>
<div class="line">warp::parfor_all_vertices(graph, set_in_edges, some_vset); </div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current</td><td>The vertex to map reduce the neighborhood over </td></tr>
    <tr><td class="paramname">edge_direction</td><td>To run over all IN_EDGES, OUT_EDGES or ALL_EDGES </td></tr>
    <tr><td class="paramname">extra</td><td>An additional argument to be passed to the mapper and combiner functions. </td></tr>
    <tr><td class="paramname">transform_fn</td><td>The transform function to run on all the selected edges.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classgraphlab_1_1warp_1_1warp__engine.html" title="The warp engine executed update functions asynchronously and can ensure mutual exclusion such that ad...">warp_engine</a> </dd>
<dd>
<a class="el" href="group__warp.html#ga1b9dc57a80c5015e2101bd12f95e40a8">warp::parfor_all_vertices()</a> </dd>
<dd>
<a class="el" href="group__warp.html#ga642f56ae436a5825835ed2c0921732bb">warp::map_reduce_neighborhood()</a> </dd>
<dd>
<a class="el" href="group__warp.html#gaee15548ed56f9ad746bcf1388b552c95">warp::broadcast_neighborhood()</a> </dd></dl>

<p>Definition at line <a class="el" href="warp__graph__transform_8hpp_source.html#l00409">409</a> of file <a class="el" href="warp__graph__transform_8hpp_source.html">warp_graph_transform.hpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Dec 29 2014 17:16:26 for GraphLab: Distributed Graph-Parallel API by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9 </li>
  </ul>
</div>
</body>
</html>
